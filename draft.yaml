models:
  Country:
    name: string:100
    softDeletes
    timestamps
    relationships:
      hasMany: State

  State:
    country_id: unsignedBigInteger
    name: string:100
    softDeletes
    timestamps
    relationships:
      belongsTo: Country
      hasMany: City

  City:
    state_id: unsignedBigInteger
    name: string:100
    softDeletes
    timestamps
    relationships:
      belongsTo: State
      hasMany: District

  District:
    city_id: unsignedBigInteger
    name: string:100
    softDeletes
    timestamps
    relationships:
      belongsTo: City

  PinCode:
    district_id: unsignedBigInteger
    code: string:10 unique
    softDeletes
    timestamps
    relationships:
      belongsTo: District

  User:
    name: string
    mobile: string
    email: string unique
    password: string
    pincode_id: unsignedBigInteger nullable
    otp: unsignedBigInteger nullable
    otp_expires_at: datetime nullable
    email_verified_at: datetime nullable
    is_active: boolean default:0
    timestamps
    softDeletes
    relationships:
      belongsTo: PinCode
      hasMany: Restaurant, Policy

  Plan:
    name: string
    price: decimal:10,2 nullable defult:0.00
    duration_days: integer nullable
    description: string nullable
    is_active: boolean default:0
    timestamps
    softDeletes
    relationships:
      hasMany: PlanFeature

  PlanFeature:
    plan_id: unsignedBigInteger
    feature: string
    is_active: boolean default:0
    timestamps
    softDeletes
    BelongsTo: Plan

  TaxSetting:
    restaurant_id: unsignedBigInteger
    name: string
    rate: decimal:4,2 default:0.00
    is_active: boolean default:0
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant

  Restaurant:
    user_id: unsignedBigInteger
    pin_code_id: unsignedBigInteger
    plan_id: unsignedBigInteger nullable
    name: string
    address: text
    gstin: string nullable
    plan_expiry_at: date nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: PinCode, Plan, User
      hasMany: TaxSetting, Category, Area, Table, TableBooking, Order, Discount, Customer

  Category:
    restaurant_id: id foreign
    name: string
    is_active: boolean default:0
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant
      hasMany: Item

  Item:
    category_id: unsignedBigInteger
    item_type: enum:non_veg,veg,beverage nullable
    name: string
    short_name: string nullable
    code : string unique nullable
    description: text nullable
    price: decimal:10,2
    is_active: boolean default:true
    timestamps
    softDeletes
    relationships:
      belongsTo: Category
      hasMany: Variant, OrderItem, KOTItem

  Variant:
    item_id: unsignedBigInteger
    name: string
    price: decimal:10,2 nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Item
      hasMany: OrderItem, KOTItem

  Discount:
    code: string unique
    type: enum:fixed,percentage
    value: decimal:10,2
    minimum_amount: decimal:10,2 nullable
    maximum_discount: decimal:10,2 nullable
    is_active: boolean default:true
    starts_at: timestamp nullable
    ends_at: timestamp nullable
    max_uses: integer nullable
    used_count: integer default:0
    restaurant_id: unsignedBigInteger
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant
      hasMany: Order

  Customer:
    name: string
    mobile: string
    email: string nullable
    dob: date nullable
    anniversary: date nullable
    restaurant_id: unsignedBigInteger
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant
      hasMany: Visit, Order

  Area:
    restaurant_id: unsignedBigInteger
    name: string
    description: text nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant
      hasMany: Table

  Table:
    area_id: unsignedBigInteger
    name: string
    capacity: integer
    status: enum:available,occupied,reserved default:available
    qr_token: string unique nullable
    qr_enabled: boolean default:true nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Area
      hasMany: TableBooking, Order, Kot

  TableBooking:
    table_id: unsignedBigInteger
    customer_name: string
    mobile: string
    booking_time: timestamp
    deposit: decimal:10,2 nullable
    status: enum:booked,cancel,done default:booked
    notes: text nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Table
      hasMany: Order

  Order:
    order_number: string uniqid
    restaurant_id: unsignedBigInteger
    table_id: unsignedBigInteger nullable
    user_id: unsignedBigInteger nullable
    customer_id: unsignedBigInteger nullable
    discount_id: unsignedBigInteger nullable
    order_type: enum:dine_in,takeaway,delivery
    status: enum:pending,preparing,ready,served,complete,cancelled default:pending
    sub_total: decimal:10,2 default:0.00
    discount_amount: decimal:10,2 default:0.00
    tax_amount: decimal:10,2 default:0.00
    total_amount: decimal:10,2 default:0.00
    notes : text nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant, Table, User, Customer, Discount
      hasMany: OrderItem, Payment, Visit, Kot

  OrderItem:
    order_id: unsignedBigInteger
    item_id: unsignedBigInteger
    variant_id: unsignedBigInteger nullable
    quantity: integer
    base_price: decimal:10,2
    discount_amount: decimal:10,2 default:0.00 nullable
    total_price: decimal:10,2
    special_notes: text nullable
    status: enum:pending,preparing,ready,served default:pending
    timestamps
    softDeletes
    relationships:
      belongsTo: Order, Item, Variant
      hasMany: KOTItem

  Payment:
    order_id: unsignedBigInteger
    method: enum:cash,card,upi,duo,part
    amount: decimal:10,2
    split_group: string nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Order

  Visit:
    customer_id: unsignedBigInteger
    order_id: unsignedBigInteger
    visited_at: timestamp
    timestamps
    softDeletes
    relationships:
      belongsTo: Customer, Order

  Kot:
    order_id: unsignedBigInteger
    table_id: unsignedBigInteger nullable
    kot_number: string uniqid
    status: enum:pending,preparing,ready,cancelled default:pending
    printed_at: timestamp nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Order, Table
      hasMany: KOTItem

  KOTItem:
    kot_id: unsignedBigInteger
    item_id: unsignedBigInteger
    variant_id: unsignedBigInteger nullable
    quantity: integer
    status: enum:pending,preparing,ready,served,cancelled default:pending
    special_notes: text nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Kot, Item, Variant

  Expense:
    restaurant_id: unsignedBigInteger
    category: enum:rent,salary,maintenance,raw_material,marketing,other
    description: text nullable
    amount: decimal:10,2
    paid_at: date nullable
    created_by: unsignedBigInteger nullable
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant

  Policy:
    restaurant_id: unsignedBigInteger nullable
    user_id: unsignedBigInteger nullable
    title: string:150
    content: longtext
    is_active: boolean default:0
    timestamps
    softDeletes
    relationships:
      belongsTo: Restaurant, User
